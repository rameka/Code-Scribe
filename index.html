<!--Project: Coding playgrond to practice HTML, CSS and JS | Author: Ramakrishna Sayee Meka -->

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Lato:400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css" type="text/css">
    <title>Code Scribe</title>

  </head>
  <body>

    <div id ="header" >
      <img src="assets/logo.png" id="logoimg"></img>
      <div id="logo">Code <span id="innerlogo">Scribe<span></div>

        <!-- Buttons that have to be toggled -->
      <div id="buttonContainer" class="btn-group">
        <div  class="btn btn-primary toggleButton active" id="html">HTML</div>
        <div  class="btn btn-primary toggleButton buttonmodify" id="css">CSS</div>
        <div  class="btn btn-primary toggleButton buttonmodify" id="javascript">Java Script</div>
        <div  class="btn btn-primary toggleButton active" id="output">Output</div>
      </div>
    </div>

    <!-- Removing floats -->
    <div id="reset"></div>

    <!-- Panels for HTML, CSS, JS and Output-->
    <div id="bodyContainer">
        <textarea id="htmlPanel" class="panel areafont" ><p id="paragraph">Hello World!</p></textarea>
        <textarea id="cssPanel" class="panel areafont hidden">p { color: green; }</textarea>
        <textarea id="javascriptPanel" class="panel areafont hidden">document.getElementById("paragraph").innerHTML = "Hello Ram!";</textarea>
        <iframe id="outputPanel" class="panel areafont"></iframe>
    </div>

    <script type="text/javascript">

    // Executing the javascript, HTML, CSS for populating the outpit
        function updateOutput() {

            $("iframe").contents().find("html").html("<html><head><style type='text/css'>" + $("#cssPanel").val() + "</style></head><body>" + $("#htmlPanel").val() + "</body></html>");

            document.getElementById("outputPanel").contentWindow.eval($("#javascriptPanel").val());
        }

        // Toggling on and off each panels

           $(".toggleButton").click(function() {

            $(this).toggleClass("active");

            var panelId = $(this).attr("id") + "Panel";

            $("#" + panelId).toggleClass("hidden");

            var numberOfActivePanels = 4 - $('.hidden').length;

            $(".panel").width(($(window).width() / numberOfActivePanels) - 10);

        })
        // Initially setting the height and width of the screen scize
        $(".panel").height($(window).height() - $("#header").height() - 15);

        $(".panel").width(($(window).width() / 2)-10);
        updateOutput();

        //jQuery to handle users copy and paste event
        $("textarea").on('change keyup paste', function() {

            updateOutput();

        });

        // Function to set height and width of the panels
        function heightWidth(){
        $(".panel").height($(window).height() - $("#header").height() - 15);

        var numberOfActivePanels = 4 - $('.hidden').length;

        $(".panel").width(($(window).width() / numberOfActivePanels) - 10);
        }

        // Changing the width and height of the panels based on window screen size
        window.onresize = heightWidth;

    </script>

  </body>
</html>
